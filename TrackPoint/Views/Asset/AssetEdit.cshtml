@model TrackPoint.Views.Asset.AssetAddViewModel;
@{
}
<h1>Editing an Asset</h1>
@if (TempData["InputError"] != null)
{
	<div class="alert alert-danger" role="alert">
		@TempData["InputError"]
	</div>
}
<form asp-action="NewAsset" method="post">
	<input type="hidden" asp-for="asset.AssetTag" value="@Model.asset.AssetTag">
	<input type="hidden" asp-for="asset.AssetId" value="@Model.asset.AssetId">
	<input type="hidden" asp-for="asset.IssuedToUserId" value="@Model.asset.IssuedToUserId">
	<input type="hidden" asp-for="asset.StatusDate" value="@Model.asset.StatusDate">
	<div>
		<label asp-for="asset.Make">Make</label>
		<input type="text" asp-for="asset.Make" value="@Model.asset.Make">
	</div>

	<div>
		<label asp-for="asset.Model">Model</label>
		<input type="text" asp-for="asset.Model" value="@Model.asset.Model">
	</div>
	<div>
		<label asp-for="asset.SerialNumber">Serial Number</label>
		<input type="text" asp-for="asset.SerialNumber" value="@Model.asset.SerialNumber">
    </div>
	<div>
		<label asp-for="asset.PurchaseDate">Purchase Date</label>
		<input type="date" asp-for="asset.PurchaseDate" value="@(Model.asset.PurchaseDate.HasValue ? Model.asset.PurchaseDate.Value.ToString("yyyy-MM-dd") : String.Empty)">
	</div>
	<div>
		<label asp-for="asset.PurchasePrice">Purchase Price</label>
		<input type="number" step="0.01" asp-for="asset.PurchasePrice" value="@Model.asset.PurchasePrice">
	</div>
	<div>
		<label asp-for="asset.WarrantyExpirationDate">Warranty Expiration Date</label>
		<input type="date" asp-for="asset.WarrantyExpirationDate" value="@(Model.asset.WarrantyExpirationDate.HasValue ? Model.asset.WarrantyExpirationDate.Value.ToString("yyyy-MM-dd") : String.Empty)">
	</div>
	<div>
		<label asp-for="asset.Vendor">Vendor</label>
		<input type="text" asp-for="asset.Vendor" value="@Model.asset.Vendor">
	</div>
	<div>
		<label asp-for="asset.Condition">Condition</label>
        <input type="text" asp-for="asset.Condition" value="@Model.asset.Condition">
	</div>

	<div>
		<label asp-for="asset.CategoryId">Category</label>
		<select asp-for="asset.CategoryId">
            <option value="">Select Category</option>
			<!--Populate the dropdown with available categories-->
			@foreach(Category c in Model._categories)
			{
                // If the editing asset's category matches the current category, mark it as selected
				if (c.CategoryId == Model.asset.CategoryId)
				{
					<option value="@c.CategoryId" selected>@c.Name</option>
				} else
				{
					<option value="@c.CategoryId">@c.Name</option>
				}
						
			}
		</select>
	</div>

	<div>
		<label asp-for="asset.LocationId">Location</label>
		<select asp-for="asset.LocationId">
			<option value="">Select Location</option>
			<!--Populate the dropdown with available locations-->
			@foreach(Location l in Model._locations)
			{
				// If the editing asset's location matches the current location, mark it as selected
				if (l.LocationId == Model.asset.LocationId)
				{
					<option value="@l.LocationId" selected>@l.Name</option>
				}
				else
				{
					<option value="@l.LocationId">@l.Name</option>
				}
			}
		</select>
	</div>

	<div>
		<label asp-for="asset.IssuedToUser">Issued To</label>
		<input type="text" asp-for="asset.IssuedToUser" value="@Model.asset.IssuedToUser">
	</div>

	<div>
		<select asp-for="asset.AssetStatus">
			<option value="">Select Status</option>
			<option value="InUse">In Use</option>
			<option value="InStorage">In Storage</option>
			<option value="UnderMaintenance">Under Maintenance</option>
			<option value="Retired">Retired</option>
			<option value="PendingDeployment">Pending Deployment</option>
			<option value="Lost">Lost</option>
			<option value="Transfered">Transfered</option>
			<option value="NeedsReplacement">Needs Replacement</option>
			<option value="OnHold">On Hold</option>
			<option value="Returned">Returned</option>
		</select>
	</div>

	<div>
		<textarea asp-for="asset.Notes" placeholder="Additional notes about the asset">@Model.asset.Notes</textarea>
	</div>

	<input type="submit" value="Submit" asp-action="UpdateAsset">
</form>
